FILE(GLOB PO_FILES *.po)

FOREACH (FILE ${PO_FILES})
	GET_FILENAME_COMPONENT(LANGNAME ${FILE} NAME_WE)
	SET(OUT "${LANGNAME}.mo")
	SET(IN "${LANGNAME}.po")

	add_custom_command(OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/${OUT}
					   COMMAND msgfmt ${IN} -o ${CMAKE_CURRENT_BINARY_DIR}/${OUT}
					   WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
					   COMMENT "Compiling localization ${LANGNAME}."
					   VERBATIM)
	
	SET (TARGET_DEPENDS ${TARGET_DEPENDS}
		${CMAKE_CURRENT_BINARY_DIR}/${OUT})
ENDFOREACH ()

ADD_CUSTOM_TARGET(languages DEPENDS ${TARGET_DEPENDS})
